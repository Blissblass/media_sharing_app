{"version":3,"sources":["components/UserContext.jsx","components/Colours.js","components/NavbarButtons.jsx","components/Navbar.jsx","components/Notification.jsx","components/Alerts.jsx","components/SongInfo.jsx","components/Song.jsx","components/Feed.jsx","components/CreateButton.jsx","components/PopupBox.jsx","components/NewSongPopup.jsx","components/SearchBar.jsx","components/Home.jsx","components/Login.jsx","components/Signup.jsx","components/ProtectedRoute.jsx","components/AuthRoute.jsx","components/UserProfSong.jsx","components/UserLikes.jsx","components/UserPosts.jsx","components/UserInfo.jsx","components/UserProfile.jsx","index.jsx"],"names":["UserContext","createContext","Colours","black","white","grey","blue","NavbarButtons","props","user","className","to","id","Button","type","variant","size","username","onClick","localStorage","removeItem","setUser","Navbar","useContext","style","backgroundColor","fontSize","color","Notification","useState","show","setShow","Alert","onClose","dismissible","Heading","head","notif","Alerts","notifs","Object","keys","map","key","SongInfo","likes","setLikes","liked","setLiked","likeData","setLikeData","setLoading","song","currUser","useEffect","a","fetch","method","headers","Headers","body","JSON","stringify","liker_id","then","data","json","length","fetchLiked","display","alignItems","justifyContent","cursor","marginRight","like","old","title","Song","controls","width","controlsList","src","media","setPosts","oldPosts","filter","post","Feed","setSongs","useLayoutEffect","fetchData","Spinner","loading","height","animation","Stack","visibility","gap","songs","CreateButton","position","bottom","right","handleSet","PopupBox","file","setFile","disabled","setDisabled","uploading","setUploading","handleClose","Modal","centered","onHide","Header","closeButton","Title","Body","onSubmit","e","preventDefault","currentTarget","value","mediaLink","URL","createObjectURL","formData","FormData","append","songData","oldSongs","htmlFor","required","accept","onChange","inputFile","files","console","log","split","textDecoration","Footer","form","NewSongPopup","oldShow","SearchBar","queryStr","setQueryStr","placeholder","target","Home","Login","top","inputs","email","password","setNotifs","setItem","error","SignUp","password_confirmation","errors","ProtectedRoute","element","AuthRoute","UserProfSong","UserLikes","likedSongs","UserPosts","createdSongs","setCreated","UserInfo","UserProfile","useParams","profUser","setProfUser","profUserFollows","setUserFollows","profLikes","setProfLikes","profSongs","setProfSongs","status","following","setFollowing","follows","followee_id","follower_id","handleFollow","Date","created_at","toDateString","Index","parse","getItem","Provider","exact","path","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.cdd2db9e.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nconst UserContext = createContext(null);\nexport default UserContext;\n","\nconst Colours = {\n  black: '#363636',\n  white: '#F8F8F8',\n  grey: '#EBEBEB',\n  blue: '#3F87EA'\n};\n\nexport default Colours;","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\n\n\nconst NavbarButtons = (props) => {\n\n  const handleLogout = () => { \n    localStorage.removeItem('user');\n    props.setUser(null);\n  };\n \n  return(\n    props.user ? \n      <div className=\"me-3\">\n        <Link to={`/user/${props.user.id}`}>\n          <Button type=\"button\" variant=\"outline-primary\" size=\"lg\" className=\"me-5 ms-5\">\n            {props.user.username}\n          </Button>\n        </Link>\n\n        \n        <Button type=\"button\" variant=\"outline-primary\" size=\"lg\" onClick={handleLogout}>Log Out</Button>\n      </div>\n    :\n      <div className=\"me-3\">\n        <Link to=\"/login\">\n          <Button type=\"button\" variant=\"outline-primary\" size=\"lg\" className=\"me-5 ms-5\">\n            Log in\n          </Button>\n        </Link>\n\n        <Link to=\"/signup\">\n          <Button type=\"button\" variant=\"outline-primary\" size=\"lg\">Sign Up</Button>\n        </Link>\n      </div>\n\n  )\n};\n\nexport default NavbarButtons;","import React, { useContext } from \"react\";\nimport './Navbar.css'\nimport Colours from \"./Colours\";\nimport NavbarButtons from \"./NavbarButtons\";\nimport { Link } from \"react-router-dom\";\nimport UserContext from \"./UserContext\";\n\nconst Navbar = (props) => {\n  const { user, setUser } = useContext(UserContext);\n\n  return(\n    <nav style={{backgroundColor: Colours.black}} \n        className=\"navbar navbar-dark navbar-expand-lg justify-content-between align-items-center shadow\">\n\n      <h3 style={{fontSize:40, color: Colours.white}}  className=\"navbar-brand m-3 ms-2 \">\n        <Link to=\"/\" className=\"text-decoration-none text-white border-end  p-3\">Sound.io</Link>\n      </h3>\n      <NavbarButtons user={user} setUser={setUser} />\n    </nav>\n  )\n};\n\nexport default Navbar;","import React, { useState } from \"react\";\nimport { Alert } from \"react-bootstrap\";\n\nconst Notification = (props) => {\n  const [show, setShow] = useState(true);\n\n  return(\n    <Alert className=\"position-relative container opacity-75\" show={show} variant=\"secondary\" onClose={() => setShow(false) } dismissible>\n      <Alert.Heading>{`${props.head} ${props.notif}`}</Alert.Heading>\n    </Alert>\n  )\n};\n\nexport default Notification;","import React from \"react\";\nimport Notification from \"./Notification\";\n\nconst Alerts = (props) => {\n\n  return(\n    props.notifs ? \n      <div className=\"position-absolute top-50 ms-5\">\n        {Object.keys(props.notifs).map(key => (\n          <Notification key={key} head={key} notif={props.notifs[key][0]} />\n        ))}\n      </div>\n    : \n      null\n  )\n};\n\nexport default Alerts;","import React, { useEffect, useState } from \"react\";\nimport { Link } from 'react-router-dom';\nimport { FaRegThumbsUp} from 'react-icons/fa';\n\nconst SongInfo = (props) => {\n  const [likes, setLikes] = useState(props.likes);\n  const [liked, setLiked] = useState(false);\n  const [likeData, setLikeData] = useState(null);\n  const { setLoading, song, currUser } = props;\n\n  useEffect(() => {\n    const fetchLiked = async () => { \n        fetch('/api/already_liked', {\n        method: 'POST',      \n        headers: new Headers({\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }),\n        body: JSON.stringify({id: song.id, liker_id: currUser.id})\n      })      \n      .then(data => data.json())\n      .then(data => {\n        if(data.length > 0) {\n          setLiked(true);\n          setLikeData(data[0]);\n        }\n        setLoading(false);\n      });\n    }\n\n    fetchLiked()\n  }, [setLoading, currUser.id, song.id]);\n  \n  const handleLike = () => {\n    const data = {\n      like: {\n        type: 'Song',\n        liker_id: props.currUser.id,\n        id: props.song.id\n      }\n    }\n\n    if(liked) {\n\n      fetch(`/likes/${likeData.id}`, {\n        method: 'DELETE'\n      })\n      setLiked(false);\n      setLikes(old => old -= 1);\n\n    } else {\n      fetch('/likes', {\n        method: 'POST',      \n        headers: new Headers({\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }),\n        body: JSON.stringify(data)\n      })\n      .then(data => data.json())\n      .then(data => setLikeData(data));\n      setLiked(true);\n      setLikes(old => old += 1);\n    }\n  };\n\n  return(\n    <div className=\"px-2\" style={{display: 'flex', alignItems: 'center'}}>\n      <div style={{display:'flex', alignItems:'center', justifyContent: 'space-between'}}>\n        <h2 className=\"mb-1 me-2\" >{likes}</h2>\n        <FaRegThumbsUp className=\"mb-2\" \n          style={{fontSize: 40, cursor: \"pointer\", color: liked ? \"#087cfc\" : \"#302c34\", marginRight: 60}} \n          onClick={handleLike} />\n      </div>\n      <div>\n        <h2>{props.title}</h2>\n        <h4><Link className=\"text-secondary text-decoration-none\" to={`/user/${props.user.id}`}>{props.user.username}</Link></h4>\n      </div>\n    </div>\n  )\n};\n\nexport default SongInfo;","import React, { useContext } from \"react\";\nimport Colours from './Colours';\nimport SongInfo from './SongInfo';\nimport { BiTrash } from 'react-icons/bi';\nimport UserContext from \"./UserContext\";\n\n\nconst Song = (props) => {\n  const { user } = useContext(UserContext); \n  // const songLink = URL.createObjectURL();\n\n  const handleDelete = () => {\n    fetch(`/songs/${props.song.id}`, {\n      method: 'DELETE'\n    })\n\n    props.setPosts(oldPosts => oldPosts.filter(post => post.id !== props.song.id))\n  };\n\n  return(\n    <div className=\"card container w-75 mt-4\" style={{backgroundColor: Colours.white}}>\n      <div className=\"p-4\" style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>      \n        <div>\n          <SongInfo song={props.song} title={props.song.title} user={props.song.user} currUser={user} likes={props.song.likes} \n            setLoading={props.setLoading} />\n        </div>\n        <audio controls style={{width: 650}} controlsList=\"nodownload\"> \n          <source src={props.song.media} type=\"audio/mp3\" /> \n        </audio>\n\n        { user.id === props.song.user.id ? \n          <BiTrash style={{fontSize: 40, cursor: 'pointer'}} onClick={handleDelete} />\n        :\n          null\n        }\n      </div>\n    </div>\n  )\n};\n\nexport default Song;","import React, { useLayoutEffect } from \"react\";\nimport Song from './Song';\nimport { Stack, Spinner } from 'react-bootstrap';\n\nconst Feed = (props) => {\n  const { setSongs, setLoading } = props;\n\n  useLayoutEffect(() => {\n    const fetchData = async () => { \n      fetch('/api/home_feed')\n        .then(data => data.json())\n        .then(data => {\n          setSongs(data);\n          setLoading(false);\n        });\n    }\n    fetchData();\n  }, [setSongs, setLoading]);\n\n  return(\n    <div className=\"mt-3\">\n      <Spinner className=\"mx-auto mt-5\" style={{display: props.loading ? \"block\" : \"none\", width: 100, height: 100}} \n        animation=\"grow\" variant=\"primary\"  />\n      <Stack className=\"mb-4\" style={{visibility: props.loading ? \"hidden\" : \"visible\"}} gap={4}>\n        { props.songs.length > 0 ? \n\n          props.songs.map(song => <Song key={song.id} song={song} setLoading={props.setLoading} setPosts={props.setSongs} />) \n        : \n          <h1 style={{display: props.loading ? \"none\" : \"block\"}} className=\"text-center text-white mt-4\">No songs available.</h1> \n        }\n      </Stack>\n    </div>\n  )\n};\n\nexport default Feed;","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nconst CreateButton = (props) => {\n\n  return(\n    <Button \n      type=\"button\" variant=\"outline-primary\" size=\"lg\" \n      style={{position: 'fixed', bottom: 40, right: 35}}\n      onClick={props.handleSet}\n    >\n      + New\n    </Button>\n  )\n};\n\nexport default CreateButton;","import React, { useState, useContext } from \"react\";\nimport { Modal, Button } from \"react-bootstrap\";\nimport UserContext from \"./UserContext\";\n\nconst PopupBox = (props) => {\n  const [file, setFile] = useState(null);\n  const [disabled, setDisabled] = useState(false);\n  const [uploading, setUploading] = useState(false);\n  const { user } = useContext(UserContext);\n\n  const handleClose = () => {\n    props.handleSet(old => !old);\n  }; \n\n  const resetFile = () => {\n    setFile(null);\n    setDisabled(false);\n  };\n\n  const handleFile = (e) => {\n    const inputFile = e.currentTarget.files[0];\n    console.log(inputFile);\n    if(!inputFile) return;\n\n    const inputType = inputFile.type.split(\"/\")[0];\n    if(inputType === 'audio') {\n      setFile(inputFile);\n    } else {\n      setDisabled(true);\n    }\n  };\n\n  const handleSubmit = (e) =>  {\n    if (!file || !user) return;\n    e.preventDefault();\n    setUploading(true);\n\n    const title = e.currentTarget[0].value;\n    const mediaLink = URL.createObjectURL(file);\n\n    const formData = new FormData();\n    formData.append('song[media]', file);\n    formData.append('song[user_id]', user.id );\n    formData.append('song[title]', title);\n\n    fetch(\"/songs\", {\n      method: 'POST',\n      body: formData \n    })\n      .then(data => data.json())\n      .then(songData => {\n        songData.user = user;\n        songData.likes = 0;\n        songData.media = mediaLink;\n        props.setSongs(oldSongs => [songData, ...oldSongs]);\n        props.handleSet();\n      });\n  }\n\n  return(\n    <Modal centered show={props.show} onHide={handleClose}>\n      <Modal.Header className=\"p-4\" closeButton>\n        <Modal.Title>Upload a Song</Modal.Title>\n      </Modal.Header>\n\n      <Modal.Body>\n        <form id=\"songForm\" onSubmit={handleSubmit}>\n          <div className=\"form-group\">\n            <label htmlFor=\"songTitle\">Song Title:</label>\n            <input id=\"songTitle\" type=\"text\" className=\"form-control form-control-lg mt-1\" required   />\n          </div>\n          <div className=\"form-group mt-4\">\n            <label htmlFor=\"songMedia\">Song File:</label>\n            <input id=\"songMedia\" type=\"file\" className=\"form-control form-control-lg mt-1\" accept=\"audio/*\" \n              onChange={handleFile} required disabled={disabled} />\n            <small className=\"mt-1\" style={{display: disabled ? \"block\" : \"none\", textDecoration: \"underline\", cursor: \"pointer\"}}\n              onClick={resetFile}>\n                Please select an audio file.\n            </small>  \n          </div>\n        </form>\n      </Modal.Body>\n\n      <Modal.Footer >\n        <Button variant=\"secondary\" onClick={handleClose}>\n          Close\n        </Button>\n        {\n          uploading ? \n            <Button type=\"submit\" variant=\"primary\" disabled>\n              Uploading...  \n            </Button>\n          :\n            <Button type=\"submit\" variant=\"primary\" form=\"songForm\" >\n              Upload\n            </Button>\n        }\n      </Modal.Footer>\n\n  </Modal>\n  );\n};\n\nexport default PopupBox;","import React, { useState } from 'react';\nimport CreateButton from './CreateButton';\nimport PopupBox from './PopupBox';\n\nconst NewSongPopup = (props) => {\n  const [show, setShow] = useState(false);\n\n  const handleSet = () => {\n    setShow(oldShow => !oldShow);\n  };\n\n  return(\n    <div>\n      {show ? <PopupBox setSongs={props.setSongs} handleSet={handleSet} show={show} /> : null}\n      <CreateButton  handleSet={handleSet} />\n    </div>\n  )\n};\n\nexport default NewSongPopup;","import React, { useEffect, useState } from \"react\";\nimport { BiSearch } from 'react-icons/bi';\n\n\nconst SearchBar = (props) => {\n  const [queryStr, setQueryStr] = useState(\"\");\n  const setSongs = props.setSongs\n\n  useEffect(() => {\n    if(queryStr.length) {\n      fetch(`/api/song_query/?query=${queryStr}`)\n        .then(data => data.json())\n        .then(data => setSongs(data))\n      } else {\n        fetch('/api/home_feed')\n          .then(data => data.json())\n          .then(data => {\n            setSongs(data);\n          })\n      }\n    \n  }, [queryStr, setSongs]);\n\n  return(\n    <div className=\"card container mt-4\" style={{width: 900, display: props.loading ? \"none\" : \"block\"}} >\n      <div className=\"p-4 d-flex align-items-center\" >\n        <input type=\"text\" className=\"form-control form-control-lg me-3\" placeholder=\"Search for songs...\" \n          value={queryStr} onChange={(e) => setQueryStr(e.target.value)}  />\n        <BiSearch style={{fontSize: 33}} />\n      </div>\n    </div>\n  )\n}\n\nexport default SearchBar;","import React, { useState } from \"react\";\nimport Feed from \"./Feed\";\nimport NewSongPopup from \"./NewSongPopup\";\nimport SearchBar from './SearchBar';\n\nconst Home = (props) =>  {\n  const [songs, setSongs] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  return (\n    <div>\n      <NewSongPopup setSongs={setSongs} />\n      <SearchBar loading={loading} setSongs={setSongs} />\n      <Feed loading={loading} setLoading={setLoading} songs={songs} setSongs={setSongs} />\n    </div>\n  );\n}\n\nexport default Home;\n","import React, { useContext } from \"react\";\nimport { Button } from 'react-bootstrap';\nimport UserContext from \"./UserContext\";\n\n\nconst Login = (props) => {\n\n  const { setUser } = useContext(UserContext);\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const inputs = e.currentTarget;\n    const data = {\n      user: {\n        email: inputs[0].value,\n        password: inputs[1].value,\n      }\n    }\n\n    fetch('/users/sign_in', { \n      method: 'POST',\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }),\n      body: JSON.stringify(data)\n    })\n      .then(data => data.json())\n      .then(data => {\n        if(data.username) {\n          props.setNotifs(null);\n          localStorage.setItem('user', JSON.stringify(data));\n          setUser(data);\n        } else {\n          props.setNotifs(null);\n          props.setNotifs({ 'Error:': [data.error] });\n        }\n      });\n  };\n\n  return(\n    <div>\n      <div className=\"text-white w-50 text-center\" style={{position: \"relative\", top: 50}}>\n        <h1><strong>Welcome to Sound.io.</strong></h1>\n        <h2>Listen without limits.</h2>\n      </div>\n\n      <div className=\"card container mt-4 me-4 p-4 w-50 float-end text-center shadow-lg\">\n        <h1>Log In</h1>\n\n        <form onSubmit={handleSubmit}> \n          <input type=\"email\" className=\"form-control form-control-lg mt-3 shadow-sm\" placeholder=\"Email...\" required />  \n          <input type=\"password\" className=\"form-control form-control-lg mt-3 shadow-sm\" placeholder=\"Password...\" required />  \n          <Button type=\"submit\" variant=\"outline-primary\" size=\"lg\" className=\"me-5 ms-5 mt-4 w-50\">Log In</Button>\n        </form>\n      </div>\n  </div>\n  )\n};\n\nexport default Login;","import React, { useContext } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport UserContext from \"./UserContext\";\n\n\nconst SignUp = (props) => {\n\n  const { setUser } = useContext(UserContext);\n\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    const inputs = e.currentTarget;\n    const data = {\n      user: {\n        username: inputs[0].value,\n        email: inputs[1].value,\n        password: inputs[2].value,\n        password_confirmation: inputs[3].value\n      }\n    }\n\n    fetch('/users', { \n      method: 'POST',\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }),\n      body: JSON.stringify(data)\n    })\n    .then(data => data.json())\n    .then(data => {\n      if(data.username) {\n        props.setNotifs(null);\n        localStorage.setItem('user', JSON.stringify(data));\n        setUser(data);\n      } else {\n        props.setNotifs(null);\n        props.setNotifs(data.errors);\n      }\n    });\n  };\n\n  return(\n    <div>\n      <div className=\"text-white w-50 text-center\" style={{position: \"relative\", top: 50}}>\n        <h1><strong>Welcome to Sound.io.</strong></h1>\n        <h2>Listen without limits.</h2>\n      </div>\n\n      <div className=\"card container mt-4 me-4 p-4 w-50 float-end text-center shadow-lg\">\n        <h1>Sign Up</h1>\n\n        <form onSubmit={handleSubmit}>\n          <input type=\"text\" className=\"form-control form-control-lg mt-2 shadow-sm\" placeholder=\"Username...\" />  \n          <input type=\"email\" className=\"form-control form-control-lg mt-3 shadow-sm\" placeholder=\"Email...\" />  \n          <input type=\"password\" className=\"form-control form-control-lg mt-3 shadow-sm\" placeholder=\"Password...\" />  \n          <input type=\"password\" className=\"form-control form-control-lg mt-3 shadow-sm\" placeholder=\"Password Confirmation...\" />  \n          <Button type=\"submit\" variant=\"outline-primary\" size=\"lg\" className=\"me-5 ms-5 mt-4 w-50\">Sign Up</Button>\n        </form>\n      </div>\n  </div>\n  )\n};\n\nexport default SignUp;","import React, { useContext } from \"react\";\nimport UserContext from './UserContext';\nimport { Navigate } from 'react-router-dom';\n\n\nconst ProtectedRoute = (props) => {\n  const { user } = useContext(UserContext);\n  \n  return(\n    user ? <props.element /> : <Navigate to=\"/login\" />\n  )\n};\n\nexport default ProtectedRoute;","import React, { useContext } from \"react\";\nimport UserContext from './UserContext';\nimport { Navigate } from 'react-router-dom';\n\n\nconst AuthRoute = (props) => {\n  const { user } = useContext(UserContext);\n\n  return(\n    user ? <Navigate to=\"/\" /> : <props.element setNotifs={props.setNotifs}  />\n  )\n};\n\nexport default AuthRoute;","import React, { useContext } from \"react\";\nimport UserContext from \"./UserContext\";\nimport Colours from './Colours';\nimport SongInfo from './SongInfo';\nimport { BiTrash } from 'react-icons/bi';\n\nconst UserProfSong = (props) => {\n  const { user } = useContext(UserContext); \n\n  const handleDelete = () => {\n    fetch(`/songs/${props.song.id}`, {\n      method: 'DELETE'\n    })\n\n    props.setPosts(oldPosts => oldPosts.filter(post => post.id !== props.song.id))\n  };\n\n  return(\n    <div className=\"card container mt-4\" style={{backgroundColor: Colours.white}}>\n      <div className=\"p-4\" style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between'}}>      \n        <div>\n          <SongInfo song={props.song} title={props.song.title} user={props.song.user} currUser={user} likes={props.song.likes} \n            setLoading={props.setLoading}/>\n        </div>\n        <audio controls style={{width: 650}}> \n          <source src={props.song.media} /> \n        </audio>\n\n        { user.id === props.song.user.id ? \n          <BiTrash style={{fontSize: 40, cursor: 'pointer'}} onClick={handleDelete} />\n        :\n          null\n        }\n      </div>\n    </div>\n  )\n};\n\nexport default UserProfSong","import React, { useContext } from \"react\";\nimport UserProfSong from \"./UserProfSong\";\nimport UserContext from \"./UserContext\";\n\n\nconst UserLikes = (props) => {\n  const { user } = useContext(UserContext);\n\n  return(\n    <div className=\"card container mt-4 p-4 w-75\">\n      <h1>User likes!</h1>\n      { props.likedSongs.length ? \n      props.likedSongs.map(song => <UserProfSong song={song} user={user}\n         key={song.id} setLoading={props.setLoading} setPosts={props.setLiked} />) \n         :\n         <h2 className=\"mx-auto\">User has no liked posts</h2>\n      }\n    </div>\n  )\n};\n\nexport default UserLikes;","import React, { useContext } from \"react\";\nimport UserProfSong from \"./UserProfSong\";\nimport UserContext from \"./UserContext\";\n\n\nconst UserPosts = (props) => {\n  const { user } = useContext(UserContext);\n\n  return(\n    <div className=\"card container mt-4 p-4 w-75\">\n      <h1>User posts!</h1>\n      { props.createdSongs.length ? \n        props.createdSongs.map(song => <UserProfSong song={song} user={user}\n        key={song.id} setLoading={props.setLoading} setPosts={props.setCreated} />) \n        :\n        <h2 className=\"mx-auto\">User has no posts</h2>\n      }\n    </div>\n  )\n};\n\nexport default UserPosts;","import React from \"react\";\nimport UserLikes from \"./UserLikes\";\nimport UserPosts from \"./UserPosts\";\n\nconst UserInfo = (props) => {\n\n  return(\n    <div>\n      <UserPosts createdSongs={props.createdSongs} setCreated={props.setCreated} setLoading={props.setLoading} />\n      <UserLikes likedSongs={props.likedSongs} setLiked={props.setLiked} setLoading={props.setLoading} />\n    </div>\n  )\n};\n\nexport default UserInfo;","import React, { useEffect, useState, useContext } from \"react\";\nimport { useParams } from 'react-router-dom';\nimport { Spinner } from 'react-bootstrap';\nimport UserInfo from './UserInfo';\nimport { BsHeart, BsHeartFill } from 'react-icons/bs';\nimport UserContext from \"./UserContext\";\n\nconst UserProfile = (props) => {\n  const { id } = useParams()\n  const { user } = useContext(UserContext);\n\n  const [profUser, setProfUser] = useState({});\n  const [profUserFollows, setUserFollows] = useState(0);\n  const [profLikes, setProfLikes] = useState([]);\n  const [profSongs, setProfSongs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [following, setFollowing] = useState({status: false, id: null});\n\n  useEffect(() => {\n    fetch(`/api/fetch_user/${id}`)\n    .then(data => data.json())\n    .then(data => {\n      setProfUser(data.user);\n      setProfLikes(data.likes);\n      setProfSongs(data.songs);\n      setUserFollows(data.follows);\n      setLoading(false);\n    });\n\n    fetch('/api/already_following', {\n      method: 'POST',\n      headers: new Headers({\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n      }),\n      body: JSON.stringify({followee_id: id, follower_id: user.id})\n    })\n      .then(data => data.json())\n      .then(data => setFollowing({status: data.status, id: data.id}));\n  }, [id, user]);\n\n  useEffect(() => {\n    console.log(following);\n  }, [following]);\n\n  const handleFollow = () => {\n    if(following.status) {\n      fetch(`/likes/${following.id}`, {method: 'DELETE'})\n        .then(data => {\n          setFollowing({status: false, id: null});\n          setUserFollows(old => old -= 1);\n        });\n    } else {\n      const data = {\n        like: {\n          id,\n          liker_id: user.id,\n          type: 'User'\n        }\n      }\n\n      fetch('/likes', {\n        method: 'POST',\n        headers: new Headers({\n          'Content-Type': 'application/json',\n          'Accept': 'application/json'\n        }),\n        body: JSON.stringify(data)\n      })\n        .then(data => data.json())\n        .then(data => {\n          setFollowing({status: true, id: data.id})\n          setUserFollows(old => old += 1);\n        });\n    }\n  };\n\n  return(\n      loading ? \n\n        <Spinner className=\"mx-auto mt-5\" style={{display: loading ? \"block\" : \"none\", width: 100, height: 100}} \n          animation=\"grow\" variant=\"primary\"  />\n      :\n\n      <div>\n        <div className=\"card container mt-2 p-4\">\n          <div style={{display: \"flex\", justifyContent:\"center\", alignItems:\"center\"}}>\n            <div>\n              {following.status ? \n                <BsHeartFill style={{fontSize: 60, cursor:\"pointer\"}} className=\"mt-2\" onClick={handleFollow} />\n              :\n                <BsHeart style={{fontSize: 60, cursor:\"pointer\"}} className=\"mt-2\" onClick={handleFollow} />\n              }\n              <h6 className=\"m-0 ms-4\">{profUserFollows}</h6>\n            </div>\n            <div className=\"ms-3 me-5\">\n              <h1 className=\"mb-2\">{profUser.username}'s profile!</h1>\n              <small className=\"opacity-75 ms-5\">Joined {new Date(profUser.created_at).toDateString()}</small>\n            </div>\n          </div>\n        </div>  \n        <UserInfo likedSongs={profLikes} setLiked={setProfLikes} createdSongs={profSongs} setCreated={setProfSongs} \n          setLoading={setLoading}  />\n      </div>\n  )\n};\n\nexport default UserProfile;","import React, { useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router, Route, Routes } from 'react-router-dom';\nimport UserContext from './components/UserContext';\nimport Navbar from './components/Navbar';\nimport Alerts from './components/Alerts';\nimport Home from './components/Home';\nimport Login from './components/Login';\nimport SignUp from './components/Signup';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport AuthRoute from './components/AuthRoute';\nimport UserProfile from './components/UserProfile';\nimport './components/index.css'\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\n\nconst Index = () => {\n\n  const [notifs, setNotifs] = useState(null);\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  \n  return(\n    <div>\n      <Router>\n        <UserContext.Provider value={{user, setUser}}>\n          <Navbar />\n          <Alerts notifs={notifs} setNotifs={setNotifs} />\n          <Routes>\n            <Route exact path=\"/\" element={<ProtectedRoute element={Home} />} />\n            <Route exact path=\"/login\" element={<AuthRoute element={Login} setNotifs={setNotifs} />} />\n            <Route exact path=\"/signup\" element={<AuthRoute element={SignUp} setNotifs={setNotifs} />} />\n            <Route exact path=\"/user/:id\" element={<ProtectedRoute element={UserProfile} />} />\n          </Routes>\n        </UserContext.Provider>\n      </Router>\n    </div>\n  )\n}\n\nReactDOM.render(\n  <Index />,\n  document.getElementById('root')\n);"],"sourceRoot":""}